<Window x:Class="MarkupGlass.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:MarkupGlass.Controls"
        Title="MarkupGlass"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="#01000000"
        Topmost="True"
        ShowInTaskbar="True">
<Grid Background="Transparent">
    <InkCanvas x:Name="InkSurface"
               Background="Transparent"
               EditingMode="Ink"
               UseCustomCursor="True"
               IsHitTestVisible="True" />

    <Canvas x:Name="ShapeLayer"
            Background="Transparent"
            IsHitTestVisible="True" />

    <Canvas x:Name="TextLayer"
            Background="Transparent"
            IsHitTestVisible="True" />

    <Canvas x:Name="UiLayer"
            IsHitTestVisible="True">
      <Border x:Name="Toolbar"
              Width="64"
              Background="{StaticResource ToolbarSurface}"
              BorderBrush="{StaticResource ToolbarBorder}"
              BorderThickness="1"
              CornerRadius="{StaticResource ToolbarCorner}"
              Padding="8"
              Canvas.Left="20"
              Canvas.Top="20">
        <Border.Effect>
          <DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="#55000000" />
        </Border.Effect>
        <StackPanel>
          <Button x:Name="ToolbarToggleButton" Style="{StaticResource MinimizeButtonStyle}" ToolTip="Collapse">
            <TextBlock x:Name="ToolbarToggleIcon"
                       FontFamily="Segoe Fluent Icons"
                       FontSize="14"
                       Text="&#xE711;" />
          </Button>
          <StackPanel x:Name="ToolbarContent" RenderTransformOrigin="0.5,0">
            <StackPanel.RenderTransform>
              <ScaleTransform ScaleY="1" />
            </StackPanel.RenderTransform>
            <Button x:Name="CursorButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Cursor">
              <TextBlock Style="{StaticResource ToolIconStyle}" Text="&#xE3B3;" />
            </Button>
            <Button x:Name="PenButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Pen/Highlighter">
              <Grid Width="18" Height="18">
                <TextBlock x:Name="InkIconPen"
                           FontFamily="Segoe Fluent Icons"
                           FontSize="16"
                           Foreground="#FFFFFF"
                           Text="&#xE104;"
                           Visibility="Collapsed" />
                <TextBlock x:Name="InkIconHighlighter"
                           FontFamily="Segoe Fluent Icons"
                           FontSize="16"
                           Foreground="#FFFFFF"
                           Text="&#xE193;"
                           Visibility="Collapsed" />
              </Grid>
            </Button>
            <Button x:Name="HighlighterButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Highlighter" Visibility="Collapsed">
              <TextBlock Style="{StaticResource ToolIconStyle}" Text="&#xE82D;" />
            </Button>
            <Button x:Name="EraserButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Eraser">
              <TextBlock Style="{StaticResource ToolIconStyle}" Text="&#xE75C;" />
            </Button>
            <Button x:Name="TextButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Text">
              <TextBlock Style="{StaticResource ToolIconStyle}" Text="&#xE8D2;" />
            </Button>
            <Button x:Name="ShapeButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Shapes">
              <Grid Width="18" Height="18">
                <Line x:Name="ShapeIconLine" X1="2" Y1="16" X2="16" Y2="2" Stroke="#E6E6E6" StrokeThickness="2" Visibility="Collapsed" />
                <Canvas x:Name="ShapeIconArrow" Width="18" Height="18" Visibility="Collapsed">
                  <Line X1="2" Y1="16" X2="16" Y2="2" Stroke="#E6E6E6" StrokeThickness="2" />
                  <Polygon Points="12,2 16,2 16,6" Fill="#E6E6E6" />
                </Canvas>
                <Rectangle x:Name="ShapeIconRect" Width="14" Height="14" Stroke="#E6E6E6" StrokeThickness="2" RadiusX="2" RadiusY="2" Visibility="Collapsed" />
                <Ellipse x:Name="ShapeIconEllipse" Width="14" Height="14" Stroke="#E6E6E6" StrokeThickness="2" Visibility="Collapsed" />
              </Grid>
            </Button>
            <Button x:Name="CameraButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Screenshot">
              <TextBlock Style="{StaticResource ToolIconStyle}" Text="&#xE114;" />
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}" />

            <Button x:Name="ColorButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Colors">
              <Rectangle x:Name="ColorSwatch" Width="18" Height="18" RadiusX="4" RadiusY="4" Stroke="#22000000" />
            </Button>
            <Slider x:Name="ThicknessSlider" Margin="0,6" Minimum="1" Maximum="18" Value="3" Style="{StaticResource SlimSliderStyle}" />
            <Button x:Name="FontButton" Style="{StaticResource ToolButtonStyle}" ToolTip="Font size">
              <TextBlock x:Name="FontSizeLabel" Foreground="#E6E6E6" FontSize="14" Text="16" />
            </Button>
            <CheckBox x:Name="TextBackgroundToggle" Content="" Style="{StaticResource ToggleSwitchStyle}" Width="44" />

            <Separator Style="{StaticResource ToolbarSeparatorStyle}" />

            <Button x:Name="SettingsButton" Style="{StaticResource ActionButtonStyle}" ToolTip="Settings">
              <TextBlock FontFamily="Segoe Fluent Icons" FontSize="14" Text="&#xE713;" />
            </Button>
            <Button x:Name="UndoButton" Style="{StaticResource ActionButtonStyle}" ToolTip="Undo">
              <TextBlock FontFamily="Segoe Fluent Icons" FontSize="14" Text="&#xE7A7;" />
            </Button>
            <Button x:Name="ClearButton" Style="{StaticResource ActionButtonStyle}" ToolTip="Clear">
              <TextBlock FontFamily="Segoe Fluent Icons" FontSize="14" Text="&#xE74D;" />
            </Button>
          </StackPanel>
        </StackPanel>
      </Border>
    </Canvas>
    <Canvas x:Name="ShapePaletteLayer" IsHitTestVisible="True">
      <Border x:Name="ShapePalette"
              Width="52"
              Background="{StaticResource ToolbarSurface}"
              BorderBrush="{StaticResource ToolbarBorder}"
              BorderThickness="1"
              CornerRadius="{StaticResource ToolbarCorner}"
              Padding="8"
              Canvas.Left="96"
              Canvas.Top="200"
              Visibility="Collapsed">
        <Border.Effect>
          <DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="#55000000" />
        </Border.Effect>
        <StackPanel>
          <ToggleButton x:Name="LineShapeButton" Style="{StaticResource ShapePaletteButtonStyle}" ToolTip="Line">
            <Canvas Width="20" Height="20">
              <Line X1="2" Y1="18" X2="18" Y2="2" Stroke="#E6E6E6" StrokeThickness="2" />
            </Canvas>
          </ToggleButton>
          <ToggleButton x:Name="ArrowShapeButton" Style="{StaticResource ShapePaletteButtonStyle}" ToolTip="Arrow">
            <Canvas Width="20" Height="20">
              <Line X1="2" Y1="18" X2="18" Y2="2" Stroke="#E6E6E6" StrokeThickness="2" />
              <Polygon Points="14,2 18,2 18,6" Fill="#E6E6E6" />
            </Canvas>
          </ToggleButton>
          <ToggleButton x:Name="RectShapeButton" Style="{StaticResource ShapePaletteButtonStyle}" ToolTip="Rectangle">
            <Rectangle Width="16" Height="16" Stroke="#E6E6E6" StrokeThickness="2" RadiusX="2" RadiusY="2" />
          </ToggleButton>
          <ToggleButton x:Name="EllipseShapeButton" Style="{StaticResource ShapePaletteButtonStyle}" ToolTip="Ellipse">
            <Ellipse Width="16" Height="16" Stroke="#E6E6E6" StrokeThickness="2" />
          </ToggleButton>
        </StackPanel>
      </Border>
    </Canvas>
    <Canvas x:Name="InkPaletteLayer" IsHitTestVisible="True">
      <Border x:Name="InkPalette"
              Width="52"
              Background="{StaticResource ToolbarSurface}"
              BorderBrush="{StaticResource ToolbarBorder}"
              BorderThickness="1"
              CornerRadius="{StaticResource ToolbarCorner}"
              Padding="8"
              Canvas.Left="96"
              Canvas.Top="120"
              Visibility="Collapsed">
        <Border.Effect>
          <DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="#55000000" />
        </Border.Effect>
        <StackPanel>
          <ToggleButton x:Name="PenInkButton" Style="{StaticResource ShapePaletteButtonStyle}" ToolTip="Pen">
            <TextBlock FontFamily="Segoe Fluent Icons" FontSize="16" Foreground="#FFFFFF" Text="&#xE104;" />
          </ToggleButton>
          <ToggleButton x:Name="HighlighterInkButton" Style="{StaticResource ShapePaletteButtonStyle}" ToolTip="Highlighter">
            <TextBlock FontFamily="Segoe Fluent Icons" FontSize="16" Foreground="#FFFFFF" Text="&#xE193;" />
          </ToggleButton>
        </StackPanel>
      </Border>
    </Canvas>
        <Canvas x:Name="SettingsLayer" IsHitTestVisible="True">
      <Border x:Name="SettingsPanel"
              Background="#F0262A2F"
              BorderBrush="#33FFFFFF"
              BorderThickness="1"
              CornerRadius="20"
              Width="620"
              Height="600"
              Visibility="Collapsed"
              Canvas.Left="220"
              Canvas.Top="140">
        <Border.Resources>
          <Style TargetType="TextBox" BasedOn="{StaticResource SettingsTextBoxStyle}" />
        </Border.Resources>
        <Border.Effect>
          <DropShadowEffect BlurRadius="24" ShadowDepth="0" Color="#66000000" />
        </Border.Effect>
        <Grid TextElement.FontFamily="Segoe UI Variable Text">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>
          <Border x:Name="SettingsHeader"
                  Background="#2F3136"
                  CornerRadius="20,20,0,0"
                  Padding="18,14">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>
              <StackPanel>
                <TextBlock Text="Help &amp; Settings"
                           FontSize="19"
                           Foreground="#FFFFFF"
                           FontWeight="SemiBold" />
                <TextBlock Text="Set hotkeys, review tips, and customize tools."
                           Foreground="#C7CCD1"
                           Margin="0,4,0,0" />
              </StackPanel>
              <Button x:Name="CloseSettingsHeaderButton"
                      Grid.Column="1"
                      Width="28"
                      Height="28"
                      Background="#10FFFFFF"
                      BorderThickness="0"
                      ToolTip="Close">
                <TextBlock FontFamily="Segoe Fluent Icons" FontSize="12" Foreground="#FFFFFF" Text="&#xE8BB;" />
              </Button>
            </Grid>
          </Border>
          <ScrollViewer Grid.Row="1" Padding="20,20,32,20" VerticalScrollBarVisibility="Auto">
            <StackPanel>
              <TextBlock Text="Hotkeys"
                         Foreground="#FFFFFF"
                         FontWeight="SemiBold"
                         Margin="0,0,0,12" />
              <StackPanel>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Toggle Cursor" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyCursorBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Toggle Visibility" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyVisibilityBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Close App" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyCloseBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Clear All" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyClearBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Undo" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyUndoBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Pen" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyPenBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Highlighter" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyHighlighterBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Eraser" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyEraserBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Line" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyLineBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Arrow" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyArrowBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Rectangle" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyRectBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Ellipse" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyEllipseBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="140" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="Toggle Colors" Foreground="#CFCFCF" VerticalAlignment="Center" />
                  <TextBox x:Name="HotkeyColorsBox" Grid.Column="1" IsReadOnly="True" />
                </Grid>
              </StackPanel>
              <Border Height="1" Background="#22FFFFFF" Margin="0,16,0,16" />
              <TextBlock Text="Help"
                         Foreground="#FFFFFF"
                         FontWeight="SemiBold"
                         Margin="0,0,0,8" />
              <TextBlock Text="Basics"
                         Foreground="#CFCFCF"
                         FontWeight="SemiBold"
                         Margin="0,0,0,4" />
              <TextBlock Text="- Click a tool to select it. Double-click a palette button to activate a tool."
                         Foreground="#CFCFCF"
                         TextWrapping="Wrap" />
              <TextBlock Text="- Draw with Pen/Highlighter, erase with Eraser, type with Text."
                         Foreground="#CFCFCF"
                         TextWrapping="Wrap" />
              <TextBlock Text="Shapes"
                         Foreground="#CFCFCF"
                         FontWeight="SemiBold"
                         Margin="0,8,0,4" />
              <TextBlock Text="- Double-click a shape in the palette to activate it, then click and drag to place."
                         Foreground="#CFCFCF"
                         TextWrapping="Wrap" />
              <TextBlock Text="- Drag a shape to move; drag the handle to resize."
                         Foreground="#CFCFCF"
                         TextWrapping="Wrap" />
            </StackPanel>
          </ScrollViewer>
          <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,16,16">
            <Button x:Name="ApplyHotkeysButton" Content="Apply" Style="{StaticResource ActionButtonStyle}" Margin="0,0,8,0"
                    MinWidth="72" Height="32" Padding="12,0" />
            <Button x:Name="CloseSettingsButton" Content="Close" Style="{StaticResource ActionButtonStyle}"
                    MinWidth="72" Height="32" Padding="12,0" />
          </StackPanel>
        </Grid>
      </Border>
    </Canvas>    <Canvas x:Name="ColorPaletteLayer" IsHitTestVisible="True">
      <Border x:Name="ColorPalette"
              Width="52"
              Background="{StaticResource ToolbarSurface}"
              BorderBrush="{StaticResource ToolbarBorder}"
              BorderThickness="1"
              CornerRadius="{StaticResource ToolbarCorner}"
              Padding="8"
              Canvas.Left="96"
              Canvas.Top="320"
              Visibility="Collapsed">
        <Border.Effect>
          <DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="#55000000" />
        </Border.Effect>
        <StackPanel x:Name="ColorPalettePanel" />
      </Border>
    </Canvas>
    <Canvas x:Name="FontPaletteLayer" IsHitTestVisible="True">
      <Border x:Name="FontPalette"
              Width="52"
              Background="{StaticResource ToolbarSurface}"
              BorderBrush="{StaticResource ToolbarBorder}"
              BorderThickness="1"
              CornerRadius="{StaticResource ToolbarCorner}"
              Padding="8"
              Canvas.Left="96"
              Canvas.Top="420"
              Visibility="Collapsed">
        <Border.Effect>
          <DropShadowEffect BlurRadius="12" ShadowDepth="0" Color="#55000000" />
        </Border.Effect>
        <StackPanel x:Name="FontPalettePanel" />
      </Border>
    </Canvas>
    <Canvas x:Name="SnipLayer" IsHitTestVisible="False">
      <Rectangle x:Name="SnipSelection"
                 Stroke="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                 StrokeThickness="1"
                 Fill="#33007DFF"
                 RadiusX="2"
                 RadiusY="2"
                 Visibility="Collapsed" />
    </Canvas>
  </Grid>
</Window>



